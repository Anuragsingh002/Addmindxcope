<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ATL Components Store | Build The Future</title>

<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Space+Grotesk:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
:root{
    --primary:#3b82f6;
    --bg:#0f172a;
    --card:#1e293b;
    --text:#f8fafc;
}

body{
    margin:0;
    font-family:'Outfit',sans-serif;
    background:var(--bg);
    color:var(--text);
}

/* ---------- HEADER ---------- */
header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:1rem 2rem;
    background:rgba(15,23,42,.9);
    border-bottom:1px solid rgba(255,255,255,.1);
    position:sticky;
    top:0;
    z-index:100;
}
.logo{
    font-family:'Space Grotesk',sans-serif;
    font-size:1.5rem;
    font-weight:700;
    color:var(--primary);
}
.cart-icon{
    position:relative;
    cursor:pointer;
}
.badge{
    position:absolute;
    top:-8px;
    right:-10px;
    background:#ef4444;
    color:#fff;
    border-radius:50%;
    padding:2px 6px;
    font-size:.7rem;
    font-weight:bold;
}

/* ---------- PRODUCTS ---------- */
.container{
    max-width:1200px;
    margin:auto;
    padding:2rem;
}
.grid{
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(280px,1fr));
    gap:2rem;
}
.card{
    background:var(--card);
    border-radius:12px;
    padding:1.5rem;
    border:1px solid rgba(255,255,255,.05);
    display:flex;
    flex-direction:column;
    transition:.2s;
}
.card:hover{
    transform:translateY(-5px);
    border-color:var(--primary);
}
.price{
    font-weight:800;
    color:var(--primary);
    margin-bottom:1rem;
}
select{
    background:#020617;
    color:#fff;
    border:1px solid rgba(255,255,255,.2);
    padding:10px;
    border-radius:6px;
    margin-bottom:1rem;
}
.add-btn{
    background:var(--primary);
    color:white;
    border:none;
    padding:10px;
    border-radius:6px;
    cursor:pointer;
    font-weight:600;
    margin-top:auto;
}
.add-btn:hover{background:#2563eb}

/* ---------- CART ---------- */
.sidebar{
    position:fixed;
    top:0;
    right:-400px;
    width:350px;
    height:100%;
    background:#1e293b;
    padding:2rem;
    box-shadow:-5px 0 15px rgba(0,0,0,.5);
    transition:.3s;
    z-index:200;
    overflow-y:auto;
}
.sidebar.active{right:0}

.cart-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    border-bottom:1px solid rgba(255,255,255,.1);
    padding-bottom:1rem;
    margin-bottom:1.5rem;
}

.cart-item{
    background:rgba(255,255,255,.03);
    border:1px solid rgba(255,255,255,.05);
    border-radius:8px;
    padding:1rem;
    margin-bottom:1rem;
    display:flex;
    justify-content:space-between;
}

input[type="date"]{
    background:#020617;
    color:#e5e7eb;
    border:1px solid rgba(255,255,255,.1);
    border-radius:6px;
    font-size:.7rem;
    padding:4px;
}

.cart-footer{
    border-top:1px solid rgba(255,255,255,.1);
    padding-top:1rem;
    display:flex;
    justify-content:space-between;
    font-weight:bold;
}
</style>
</head>

<body>

<header>
    <div class="logo"><i class="fa-solid fa-microchip"></i> ATL Store</div>
    <div class="cart-icon" onclick="toggleCart()">
        <i class="fa-solid fa-cart-shopping"></i>
        <span id="cartBadge" class="badge">0</span>
    </div>
</header>

<div class="container">
    <h2>Available Components</h2>
    <div id="productsGrid" class="grid"></div>
</div>

<div id="cartSidebar" class="sidebar">
    <div class="cart-header">
        <h3>Your Cart</h3>
        <i class="fa-solid fa-xmark" style="cursor:pointer" onclick="toggleCart()"></i>
    </div>
    <div id="cartItems"></div>
    <div class="cart-footer">
        <span>Total</span>
        <span>‚Çπ<span id="cartTotal">0</span></span>
    </div>
</div>

<script>
/* ---------- DATA ---------- */
const products=[
 {name:"Arduino Uno R3",price:550,projects:["Line Follower","Smart Home","Obstacle Avoider"]},
 {name:"Raspberry Pi 4",price:4500,projects:["AI Camera","Retro Console"]},
 {name:"Ultrasonic Sensor",price:120,projects:["Distance Measurer","Line Follower"]},
 {name:"Servo Motor MG995",price:350,projects:["Robotic Arm","Auto Door"]}
];

const today=()=>new Date().toISOString().split("T")[0];

let cart=JSON.parse(localStorage.getItem("premiumCart"))||[];

/* ---------- RENDER PRODUCTS ---------- */
function renderProducts(){
 const grid=document.getElementById("productsGrid");
 grid.innerHTML=products.map((p,i)=>`
  <div class="card">
   <h3>${p.name}</h3>
   <div class="price">‚Çπ${p.price}</div>
   <select id="sel-${i}">
    <option value="">Select Project</option>
    ${p.projects.map(pr=>`<option>${pr}</option>`).join("")}
   </select>
   <button class="add-btn" onclick="addToCart(${i})">Add to Cart</button>
  </div>`).join("");
}

/* ---------- CART LOGIC ---------- */
function addToCart(i){
 const sel=document.getElementById(`sel-${i}`);
 if(!sel.value) return alert("Select project first");

 cart.push({
  name:products[i].name,
  price:products[i].price,
  project:sel.value,
  bookingDate:today(),
  issueDate:"",
  returnDate:""
 });

 saveCart(); updateCartUI(); toggleCart();
 sel.value="";
}

function updateCartUI(){
 const items=document.getElementById("cartItems");
 const badge=document.getElementById("cartBadge");
 const totalEl=document.getElementById("cartTotal");

 items.innerHTML=""; let total=0;

 cart.forEach((it,i)=>{
  total+=it.price;
  items.innerHTML+=`
   <div class="cart-item">
    <div>
     <b>${it.name}</b><br>
     <small>${it.project}</small><br>
     üìÖ Booked: ${it.bookingDate}<br>
     üì¶ Issue: <input type="date" value="${it.issueDate}" onchange="setDate(${i},'issueDate',this.value)"><br>
     üîÅ Return: <input type="date" value="${it.returnDate}" onchange="setDate(${i},'returnDate',this.value)">
    </div>
    <i class="fa-solid fa-trash" style="color:#ef4444;cursor:pointer" onclick="removeItem(${i})"></i>
   </div>`;
 });

 badge.textContent=cart.length;
 totalEl.textContent=total;
}

function setDate(i,f,v){ cart[i][f]=v; saveCart(); }
function removeItem(i){ cart.splice(i,1); saveCart(); updateCartUI(); }
function saveCart(){ localStorage.setItem("premiumCart",JSON.stringify(cart)); }
function toggleCart(){ document.getElementById("cartSidebar").classList.toggle("active"); }

/* ---------- INIT ---------- */
renderProducts(); updateCartUI();
</script>

<!-- Fine Calculation Section -->
<div style="border:2px solid #444; padding:15px; width:300px;">
    <h3>Component Return Fine</h3>

    <label>Due Date:</label><br>
    <input type="date" id="dueDate"><br><br>

    <label>Return Date:</label><br>
    <input type="date" id="returnDate"><br><br>

    <button onclick="calculateFine()">Find Fine</button>

    <p id="fineResult" style="font-weight:bold;"></p>
</div>

<script>
function calculateFine() {
    const due = new Date(document.getElementById("dueDate").value);
    const returned = new Date(document.getElementById("returnDate").value);
    const finePerDay = 20; // ‚Çπ20 per day

    if (!document.getElementById("dueDate").value || 
        !document.getElementById("returnDate").value) {
        document.getElementById("fineResult").innerText =
            "Please select both dates.";
        return;
    }

    let fine = 0;

    if (returned > due) {
        const diffTime = returned - due;
        const lateDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
        fine = lateDays * finePerDay;
        document.getElementById("fineResult").innerText =
            "Late by " + lateDays + " day(s). Fine: ‚Çπ" + fine;
    } else {
        document.getElementById("fineResult").innerText =
            "Returned on time. No fine!";
    }
}
</script>

</body>
</html>
